-- php bin/console doctrine:schema:update --dump-sql
CREATE TABLE IF NOT EXISTS `PREFIX_modular` (id_modular INT AUTO_INCREMENT NOT NULL, code VARCHAR(128) NOT NULL, image VARCHAR(128) NOT NULL, active TINYINT(1) NOT NULL, deleted TINYINT(1) NOT NULL, date_add DATETIME NOT NULL, date_upd DATETIME NOT NULL, PRIMARY KEY(id_modular)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
CREATE TABLE IF NOT EXISTS `PREFIX_modular_lang` (id_modular INT NOT NULL, id_lang INT NOT NULL, name VARCHAR(128) NOT NULL, content VARCHAR(255) NOT NULL, INDEX IDX_38F3DD12E3411F35 (id_modular), INDEX IDX_38F3DD12BA299860 (id_lang), PRIMARY KEY(id_modular, id_lang)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE `PREFIX_modular_lang` ADD CONSTRAINT FK_38F3DD12E3411F35 FOREIGN KEY (id_modular) REFERENCES PREFIX_modular (id_modular);
ALTER TABLE `PREFIX_modular_lang` ADD CONSTRAINT FK_38F3DD12BA299860 FOREIGN KEY (id_lang) REFERENCES PREFIX_lang (id_lang) ON DELETE CASCADE;
CREATE TABLE IF NOT EXISTS `PREFIX_modular_shop` (id_modular INT NOT NULL, id_shop INT NOT NULL, INDEX IDX_A59015D2E3411F35 (id_modular), INDEX IDX_A59015D2274A50A0 (id_shop), PRIMARY KEY(id_modular, id_shop)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
ALTER TABLE `PREFIX_modular_shop` ADD CONSTRAINT FK_A59015D2E3411F35 FOREIGN KEY (id_modular) REFERENCES PREFIX_modular (id_modular);
ALTER TABLE `PREFIX_modular_shop` ADD CONSTRAINT FK_A59015D2274A50A0 FOREIGN KEY (id_shop) REFERENCES PREFIX_shop (id_shop) ON DELETE CASCADE;
CREATE TABLE IF NOT EXISTS `PREFIX_modular_product` (id_modular INT NOT NULL, id_shop INT NOT NULL, id_product INT UNSIGNED NOT NULL, id_product_attribute INT UNSIGNED NOT NULL, position INT UNSIGNED NOT NULL, length INT UNSIGNED DEFAULT NULL, depth INT UNSIGNED DEFAULT NULL, height INT UNSIGNED DEFAULT NULL, INDEX IDX_B1AA91EBE3411F35 (id_modular), INDEX IDX_B1AA91EB274A50A0 (id_shop), PRIMARY KEY(id_modular, id_shop)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
ALTER TABLE `PREFIX_modular_product` ADD CONSTRAINT FK_B1AA91EBE3411F35 FOREIGN KEY (id_modular) REFERENCES PREFIX_modular (id_modular);
ALTER TABLE `PREFIX_modular_product` ADD CONSTRAINT FK_B1AA91EB274A50A0 FOREIGN KEY (id_shop) REFERENCES PREFIX_shop (id_shop) ON DELETE CASCADE;
-- CREATE TABLE IF NOT EXISTS `PREFIX_modular_product_attribute_shop` (id_modular INT UNSIGNED NOT NULL, id_product INT UNSIGNED NOT NULL, id_product_attribute INT UNSIGNED NOT NULL, id_shop INT UNSIGNED NOT NULL, position INT UNSIGNED NOT NULL, length INT UNSIGNED DEFAULT NULL, depth INT UNSIGNED DEFAULT NULL, height INT UNSIGNED DEFAULT NULL, INDEX IDX_4D76F37E85F48AC4 (id_modular), PRIMARY KEY(id_modular, id_product, id_product_attribute, id_shop)) DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci ENGINE = InnoDB;
